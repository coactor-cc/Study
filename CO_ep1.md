# 计算机系统概述
## 计算机的功能与软硬件
电子计算机是一种能够自动对各种信息进行处理的高速装置
计算机的设计目标时一个用户可定制工具——应该能够自动执行用户编制的程序  
### 基本功能
- 数据处理
- 数据存储
- 数据传送  

功能是通过程序实现的，程序是由指令组成的
### 软硬件
软件以硬件为平台——软件依靠硬件实现功能  
软件以硬件为窗口——硬件性能通过软件反映
#### 硬件 
控制器产生控制信号约束指定部件
#### 软件
硬件通过自动执行指令，实现软件所约束的功能  
## 发展历程
按基本器件类型划分
- 第一代 1946-1958  
电子管 声延迟线/磁鼓
- 第二代 1958-1964  
晶体管 磁芯
- 第三代 1964-1971  
中小规模集成电路 磁芯
- 第四代 1971-  
超大规模集成电路 半导体
第一台计算机ENIAC 1946 】
发展趋势：微型化、网络化、智能化/巨型化、并行化、超高速
## 硬件组成
### 冯·诺依曼模型 
![](.\图片\冯·诺依曼.jpg "补码加减运算器")
#### 硬件结构
运算器和控制器常合称为中央处理单元——CPU（Central Processing Unit）
#### 工作方式
存储程序——程序和数据预先存放在存储器中，机器工作时，自动、逐条从存储器中取出指令并执行 
#### 存储器结构
由定长单元组成的一维空间，按地址进行访问，不需要区分数据和程序  
数据和指令都由二进制表示
#### 冯·诺依曼结构七大特点
1. 计算机由控制器、运算器、存储器、输入设备和输出设备组成
1. 指令和数据都由二进制表示，运算也采用二进制的方式
1. 存储器为由定长单元组成的一维空间，按地址进行访问
1. 程序由指令序列组成、程序和数据都存放在存储器中
1. 指令由操作码和地址码组成，操作码指明了操作类型，地址码指明操作数类型
1. 机器工作时，自动、逐条地从存储器中取出指令并执行
1. 机器以运算器为中心，输入/输出设备与存储器的数据传送都经过运算器完成
### 现代计算机模型
#### 特点——以存储器为中心，多存储器共存
以存储器为中心——可以实现数据传送和数据处理并行  
多种存储器并存——可以解决存储器日益冲突的速度-容量-价格矛盾  
主存储器：存放程序执行时的代码和数据  
辅助存储器：存放所有的程序的代码和数据
将CPU和主存储器合称为主机
#### 存储器
##### 功能——存储信息
硬件中的存储器通常指主存
$$
存储器容量=存储单元个数*存储单元长度
$$
外部引脚：地址引脚、数据引脚、rw引脚  
存储单元所存放的信息称为存储字  
存储单元所能存放的二进制长度称为存储字长/存储单元长度
#### 运算器
##### 功能——对信息或数据进行处理或运算，并暂存处理和运算的结果
ALU、FPU、寄存器
#### 控制器
##### 功能——指挥和控制各部件协调工作
程序计数器PC、指令寄存器IR、指令译码器ID、控制单元CU
#### I/O设备
辅存也归为I/O设备  
I/O设备和辅存合称为外部设备 习惯将外部设备称为I/O设备
#### 总线
##### Def 设备间进行信息传输的一组信号线
总线上的设备通过地址（设备编号）来识别  
##### 优缺点
控制简单、扩展性好  
需要分时进行信息传输
##### I/O接口（设备适配器、设备控制器）
为了将外设连接到总线上，在外设和总线之间增设的连接电路  
实现数据缓冲、格式转换、通信控制  
##### 系统总线 def 连接计算机各大部件的总线
单总线结构
- 地址总线
- 数据总线
- 控制总线
    - 控制线
    - 状态线
##### 总线传输
1. 主设备发送地址和命令，所有设备判断自己是否为目标设备，若是则响应操作，处理操作请求
2. 目标设备、主设备根据命令完成数据传送
## 层次结构
- 高级语言级  
- 汇编语言级  
- 操作系统级  
- 机器与语言级  
- 微程序级
### 实际机器、虚拟机器
所编写程序可以直接被硬件识别和执行的机器——实际机器
### 翻译、解释
不同层级通过翻译或解释来实现，或者两者结合  
翻译：先将程序转化为低级机器上的等效程序，再在低级机器上一起运行  
解释：对程序中的每一条语句，执行低级机器上的一段等效程序，循环往复，直到程序执行结束
### 语句、指令
高级语言的基本单位是语句，语句表示的命令硬件无法识别  
汇编语言符号表示的命令与指令功能一一对应，将汇编语言的命令称为指令
### 软件与硬件的关系
- 系统组成
    - 软件和硬件是一个不可分割的整体
- 用户
    - 软件和硬件的功能在逻辑上是等价的
- 系统设计者
    - 软件和硬件的交界面直接影响系统的性能与成本
### 计算机的结构与组成
- 计算机系统结构 （指令集结构）   
机器语言程序员或编译程序编写者所看到的计算机系统的属性  
- 计算机组成  
计算机硬件设计人员所看到的计算机系统的属性
- 计算机实现  
计算机制造人员虽看到的计算机系统的属性
## 工作过程
### 计算机的工作方式  
计算机都采用存储程序的工作方式
#### 程序的执行顺序 
程序的执行顺序由每条指令的类型及执行结果决定，即下条指令地址由当前指令产生  
#### 执行机制
是一个循环执行指令的过程，可分为取指令，分析指令，执行指令三个阶段
### 程序执行的过程
程序执行有两个基本条件  
1.程序被调入到主存后方可执行  
2.程序首条指令地址被置入PC后放可执行
## 性能指标
计算机性能指计算机硬件的性能，
硬件性能通过运行软件反映，
因此计算机性能又称为计算机系的性能
### 硬件的技术指标
关键部件的技术指标称为性能参数
#### 机器字长
CPU一次能处理的数据的二进制位数——一次定点整数运算的位数  
受ALU、寄存器、内部数据通路位数影响
#### CPU主频
CPU中用于基本操作定时的时钟脉冲信号，称为CPU主时钟信号  
主时钟信号的宽度称为时钟周期  
主时钟信号的频率称为CPU主频
#### 存储容量
主存最大容量时主存单元地址构成的空间称为主存地址空间
主存地址空间影响CPU地址引脚位数 
辅存容量是指能够联机运行的辅存的信息存储量
### （软件测评的）性能指标
#### 响应时间
提交一个任务到完成所花费的时间
$$
T_{响应}=T_{CPU}+T_{等待}\\
T_{CPU}=\sum_{i=1}^{n}(I_i\times CPI_{i})\times T_c=程序总时钟周期数\times T_c
$$
现代计算机等待时间可忽略，因此，计算机响应时间可以衡量CPU的性能（用户CPU时间）
CPI是指执行一条指令所需的时钟周期数
#### 吞吐率
单位时间内计算机完成的总工作量  
由代表性的工作量：指令条数、浮点操作次数  
MIPS,每秒百万条指令  
由于不同机器指令集不同，所以同一程序所需指令数不同，而同一指令在不同机器所需的时间也不同，MIPS不够准确，可采用相对MIPS，相对某一机型的倍数。  
1MIPS机 ——DEC公司的VEX-11/780  
MFLOPS，每秒百万次浮点运算  
不能反映整数运算和存储访问的性能  
RAS——可靠性、可用性、可维护性  
MTTF、MTTF/（MTTF+MTTR）、MTTR  
MTTF——平均无故障时间  
MTTR——平均修复时间

